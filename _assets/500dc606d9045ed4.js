(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[73760],{

/***/ 51227:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(407350);__web_req__(104370);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var V=__c.V;var H=__c.H;
var Ydd=function(a,b){const c=b.subscribe({next:d=>{d.kind==="CREATE_COMMENT"?a.XUa(d.FF):d.kind==="DELETE_COMMENT"?a.xdb(d.Yz):d.kind==="VOTE_UPDATE"&&a.Qgb(d.BY.Yz,d.BY.BY,d.Omc?"updated":void 0)}});return()=>c.unsubscribe()},Zdd=function(a,b){const c=b.subscribe({next:d=>{d.kind==="PARTICIPANT_STATUS"&&a.qlb(d.rmc)}});return()=>c.unsubscribe()},ded=async function(a,b){const c=L$()();try{const d=new $dd(b.id,a.na),e=new aed(d.wAa,d.Xfb,a.hw,a.na,b.id,a.K,a.$g),f=new bed,{xob:g}=c.r(await c.s(__webpack_require__.me(791499).then(()=>
__c.Xdd))),h=new g(()=>ced);a.connect({sessionId:b.id,Fv:e,cE:f,LV:h});a.setState({status:3,session:b,cE:f,tN:d,Fv:e,LV:h});e.LOb(b.id)}finally{c.s()}},eed={De:"live_presentation_session_actioned",Rf(a){return __c.op({presenting_context:a.be==null?void 0:__c.OH(a.be),session_id:a.sessionId,source:a.source,action:a.action,design_id:a.$h,doctype_id:a.Tn,category_id:a.Vc})}},fed={De:"live_audience_comment_displayed",Rf(a){return __c.op({presenting_context:a.be==null?void 0:__c.OH(a.be),session_id:a.sessionId,
comment_id:a.Yz,source:a.source,design_id:a.$h,doctype_id:a.Tn,category_id:a.Vc})}},ged={De:"live_presentation_comment_sorting_interacted",Rf(a){return __c.op({presenting_context:a.be==null?void 0:__c.OH(a.be),session_id:a.sessionId,sort_order:a.Nw,action:a.action})}},M$=__webpack_require__(186901),hed=M$.EW,ied=M$.h5,N$=M$.sH,O$=M$.XI;var L$=__webpack_require__(75402)._;var jed=__webpack_require__(84654).t;var ked=__webpack_require__(893360).f;var led=__webpack_require__(477176).B7;var med=H(()=>({Ei:V("documentId",1)}));var ned=H(()=>({nxb:__c.X(2),Ei:V(3)}));var oed=H(()=>({id:V(1)}));var ped=H(()=>({zSb:__c.CJ(1),ASb:__c.CJ(2,!0)}));var qed=H(()=>({sessionId:V(1),uTb:__c.G(2,ped)}));var $dd=class{static G(a){__c.K(a,{JN:N$.ref,Xfb:O$.bound,wAa:O$.bound})}Xfb(a){this.JN=a;this.na.track(fed,{sessionId:this.sessionId,Yz:this.JN.id,source:"fullscreen_mode",$h:""})}wAa(){this.JN=void 0}constructor(a,b){this.sessionId=a;this.na=b;this.JN=($dd.G(this),void 0)}};var red=H(()=>({sessionId:V(1),Yz:V(2)}));var sed=H(()=>({sessionId:V(1),Yz:V(2)}));var ted=H(()=>({sessionId:V(1),Yz:V(2)}));var ued=H(()=>({sessionId:V(1)}));var ved=({comments:a,Nw:b,CCb:c})=>{switch(b){case "NEWEST":return a.sort((d,e)=>e.LF-d.LF);case "OLDEST":return a.sort((d,e)=>d.LF-e.LF);case "TOP_VOTED":return a.sort((d,e)=>{const f=c(e.id)-c(d.id);return f!==0?f:d.LF-e.LF});default:throw Error(`Unknown sort order: ${b}`);}};var aed=class{static G(a){__c.K(a,{comments:N$.deep,Vca:N$.ref,Nw:N$.ref,hT:N$.shallow,uN:N$.shallow,Dgb:O$.bound,idb:O$.bound,yRa:O$.bound,XUa:O$.bound,Qgb:O$,xdb:O$.bound,r9a:O$.bound,q9:O$.bound})}Dgb(a){this.Nw=a;this.yRa();this.na.track(ged,{sessionId:this.sessionId,Nw:this.Nw.toLowerCase(),action:"change_sort_order"})}idb(){this.yRa();this.na.track(ged,{sessionId:this.sessionId,Nw:this.Nw.toLowerCase(),action:"refresh"})}yRa(){this.comments=ved({comments:this.comments,Nw:this.Nw,CCb:a=>this.hT.get(a)||
0})}XUa(a){this.comments.findIndex(({id:b})=>b===a.id)===-1&&(this.comments=this.Nw==="NEWEST"?[this.pjb(a),...this.comments]:[...this.comments,this.pjb(a)],this.Nxa&&this.Vca++)}xdb(a){this.comments=this.comments.filter(({id:b})=>b!==a)}r9a(){this.Vca=0}tIb(){this.Nxa=!1}uIb(){this.Nxa=!0}pSa(a){this.uN.has(a)?this.SZa(a):this.gZa(a)}constructor(a,b,c,d,e,f,g){this.vGa=a;this.NCa=b;this.hw=c;this.na=d;this.sessionId=e;this.K=f;this.$g=g;this.comments=(aed.G(this),[]);this.Vca=0;this.Nw="NEWEST";
this.hT=new Map;this.uN=new Set;this.Nxa=!1;this.Qgb=(h,k,l)=>{this.hT.set(h,k);l==="voted"?this.uN.add(h):l==="updated"&&(this.uN.has(h)?this.uN.delete(h):this.uN.add(h))};this.SZa=async h=>{const k=L$()();try{try{k.r(await k.s(this.hw.SZa(new sed({sessionId:this.sessionId,Yz:h}))))}catch(l){k.r(),this.K.ac(l)}}finally{k.s()}};this.gZa=async h=>{const k=L$()();try{try{k.r(await k.s(this.hw.gZa(new ted({sessionId:this.sessionId,Yz:h}))))}catch(l){k.r(),this.K.ac(l)}}finally{k.s()}};this.LOb=async h=>
{const k=L$()();try{try{const l=k.r(await k.s(this.hw.e9b(new ued({sessionId:h}))));ied(()=>{l.Ifc.forEach(m=>{this.uN.add(m)});l.Anc.forEach(m=>{this.hT.set(m.Yz,m.BY)})})}catch(l){k.r(),this.K.ac(l)}}finally{k.s()}};this.pjb=h=>{this.hT.has(h.id)||this.hT.set(h.id,0);return{...h,vGa:()=>this.vGa(),NCa:()=>this.NCa(h),e2:!1,q9:()=>this.q9(h.id),BY:hed(()=>this.hT.get(h.id)||0),fYb:hed(()=>this.uN.has(h.id)),pSa:k=>this.pSa(k)}};this.q9=async h=>{const k=L$()();try{const l=this.comments.find(({id:m})=>
m===h);if(l!==void 0&&!l.e2){l.e2=!0;try{k.r(await k.s(this.hw.q9(new red({sessionId:this.sessionId,Yz:h}))))}catch(m){k.r(),this.$g.hF({XG:__c.J("ojlXGA")}),this.K.ac(m)}finally{ied(()=>l.e2=!1)}}}finally{k.s()}}}};var ced={origin:{x:.05,width:.15,y:1,height:0},mTb:{x:{min:-100,max:100},y:{min:-500,max:-300}}};var bed=class{static G(a){__c.K(a,{count:N$.ref,qlb:O$.bound})}qlb(a){this.count=a}constructor(){this.count=(bed.G(this),0)}};var wed,xed;wed=Symbol("Error starting live session");
xed=class{static G(a){__c.K(a,{state:N$.ref,dia:N$.ref,lT:hed,connect:O$,setState:O$})}get lT(){if(this.$a.status===2)return 3;if(this.dia)return 2;const a=this.hw.lT;switch(a){case 2:return 0;case 1:return 1;case 0:case 3:return 2;default:throw new __c.A(a);}}async BRa(a,b){const c=L$()();try{const d=this.state.session;d&&(c.r(await c.s(this.hw.BRa({sessionId:d.id,body:{data:a}}))),this.setState({...this.state,session:{...this.state.session,$f:b}}))}finally{c.s()}}constructor(a,b,c,d,e,f,g){this.$g=
a;this.hw=b;this.K=c;this.$a=d;this.Ei=e;this.na=f;this.fla=g;this.state=(xed.G(this),{status:0});this.dia=!1;this.Y6=[];this.X0=async()=>{const h=L$()();try{if(this.state.status===0){var k=this.Ei;try{const {session:l}=h.r(await h.s(this.hw.xAb(new med({Ei:k}))));l&&h.r(await h.s(ded(this,l)))}catch(l){h.r(),this.K.ac(l)}}}finally{h.s()}};this.startSession=async()=>{const h=L$()();try{if(this.state.status===0||this.state.status===2){this.setState({status:1});var k=this.Ei;try{const m=h.r(await h.s(this.hw.xAb(new med({Ei:k}))));
if(m.session)h.r(await h.s(ded(this,m.session))),this.$g.hF({XG:__c.J("dX07Ng")});else{var l=h.r(await h.s(this.hw.q3b(new ned({Ei:k,nxb:this.fla?.default}))));h.r(await h.s(ded(this,l.session)));this.na.track(eed,{sessionId:l.session.id,source:"fullscreen_mode",action:"new_session",$h:""})}}catch(m){h.r(),this.setState({status:2}),this.$g.hF({XG:__c.J("iUnTqw"),tx:{iN:__c.J("T9Fgtw"),onClick:this.startSession},group:wed}),this.K.ac(m)}}}finally{h.s()}};this.tTb=async()=>{const h=L$()();try{if(this.state.status===
3||this.state.status===5){this.setState({...this.state,status:4});var k=this.state,l=this.state.session;try{h.r(await h.s(this.hw.P3b(new oed({id:l.id})))),this.dispose(),this.setState({status:0}),this.na.track(eed,{sessionId:l.id,source:"fullscreen_mode",action:"end_session",$h:""})}catch(m){h.r(),m instanceof __c.yI?(this.dispose(),this.setState({status:0})):this.setState({...k,status:5})}}}finally{h.s()}};this.connect=({sessionId:h,Fv:k,cE:l,LV:m})=>{this.dispose();h=this.hw.pub(new qed({sessionId:h,
uTb:{zSb:!1,ASb:!0}}),jed);h=ked(()=>new led)(h);this.dia=!1;this.HUa=h.subscribe({next:p=>{p.kind==="SESSION_EXPIRED"&&(this.dispose(),this.setState({status:0}))},error:p=>{this.state.session&&(this.dispose(),this.K.error(p),ied(()=>this.dia=!0))}});k=Ydd(k,h);l=Zdd(l,h);const n=h.subscribe({next:p=>{p.kind==="CREATE_REACTION"&&m.Bqb(p.reaction)}});this.Y6.push(l);this.Y6.push(k);this.Y6.push(()=>n.unsubscribe());h.connect()};this.cDb=h=>{if(this.state.session)switch(h){case 0:case 1:case 3:this.dispose();
break;case 2:this.connect({sessionId:this.state.session.id,Fv:this.state.Fv,cE:this.state.cE,LV:this.state.LV});break;default:throw new __c.A(h);}};this.setState=h=>{this.state=h};this.dispose=()=>{this.Y6.forEach(h=>h());this.Y6=[];this.HUa?.unsubscribe();this.HUa=void 0};this.hw.Q2b.subscribe(this.cDb);this.X0()}};__c.P_a={};__c.P_a.yob=xed;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/500dc606d9045ed4.js.map