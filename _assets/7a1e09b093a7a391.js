(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[89788],{

/***/ 472095:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var X=__c.X;var H=__c.H;
var Uwc=async function(a,b){b=b.Khb.map(c=>a.OXa[c]).filter(c=>!!c);return new Twc({closedCaptions:b})},Wwc=function(a,b){const c=[];let d=0,e=0;for(;d<a.length&&e<b.length;){const f=a[d],g=b[e];Vwc(f,g)?(c.push(f),d++,e++):f.nt<g.nt?(c.push(f),d++):(c.push(g),e++)}for(;d<a.length;)c.push(a[d]),d++;for(;e<b.length;)(a=c?.[c.length-1])&&Vwc(a,b[e])||c.push(b[e]),e++;return c},Ywc=async function(a){const b=n3()();try{for(const e of a.$A.keys()){const f=a.RLa.get(e)??0;f>=100?a.d5(e):a.RLa.set(e,f+1)}const c=
Array.from(a.$A,([e,f])=>({id:e,Id:f})),d=b.r(await b.s(Xwc(a,c)));b.r(await b.s(Promise.allSettled(d.closedCaptions.map(async e=>{const f=n3()();try{if(e.Yu){var g=a.$A.get(e.Yu);a.nna(e,g);e.status==="IMPORTED"&&f.r(await f.s(a.zEa(e.Yu,e.i8)))}}finally{f.s()}})))).forEach(e=>{e.status==="rejected"&&a.K?.error(e.reason)})}finally{b.s()}},$wc=function(a){var b=window;let c;const d=()=>{c=b.setTimeout(o3.wrap(async()=>{Ywc(a).catch(o3.wrap(e=>a.K?.error(e))).finally(o3.wrap(()=>c!=null&&d()))}),1E4)};
Zwc(()=>a.Lbb,e=>{e?d():(b.clearTimeout(c),c=void 0)},{fireImmediately:!0})},Xwc=async function(a,b){const c=n3()();try{const d=new axc({Khb:b.map(e=>e.id),ESb:b.map(e=>e.Id).filter(__c.rb),YGa:void 0,rAb:!0});return c.r(await c.s(Uwc(a.o_,d)))}finally{c.s()}},cxc=async function(a,b){const c=n3()();try{b.forEach(k=>{a.BOa(k.id,k.Id)});const d=c.r(await c.s(Xwc(a,b).catch(o3.wrap(k=>{b.forEach(l=>a.d5(l.id));throw Error(k);})))).closedCaptions,e=new Map,[f,g]=__c.BD(b,k=>d.some(l=>l.Yu===k.id&&l.YGa===
void 0));f.forEach(k=>{const l=d.find(m=>m.Yu===k.id);l&&(e.set(k.id,l.i8),a.nna(l,k.Id))});const h=g.map(async k=>{const l=n3()();try{const m=l.r(await l.s(bxc(a,k)));a.nna(m,k.Id);e.set(k.id,m.i8)}finally{l.s()}});c.r(await c.s(Promise.allSettled(h))).forEach(k=>{k.status==="rejected"&&a.K?.error(k.reason)});return e}finally{c.s()}},bxc=async function(a,b){const c=n3()();try{try{const d=c.r(await c.s(a.kka(b)));return c.r(await c.s(a.Dna(d.s8.id,b.Id))).s8}catch(d){throw c.r(),a.d5(b.id),d;}}finally{c.s()}},
dxc=async function(a,b){const c=n3()();try{const d=__c.z(b.url),e=c.r(await c.s(a.fetch(d)));__c.x(Array.isArray(e));const f=e.map(g=>{g=__c.oa(g);return{text:__c.cIa.required("text",g),nt:__c.qab.optional("startTimeUs",g)||0,J:__c.qab.optional("durationUs",g)||0}});return{url:d,Qsb:{$O:b.$O,mja:f,hoa:!0}}}finally{c.s()}},Vwc=function(a,b){return a.nt<b.nt+b.J&&a.nt+a.J>b.nt},exc=H(()=>({wic:__c.V(1),params:(0,__c.FJ)(2)})),fxc=H(()=>({s8:__c.Na(1,__c.uY),Qmc:__c.G(2,exc)})),gxc=H(()=>({s8:__c.Na(1,
__c.uY)}));__c.SI.prototype.Dna=__c.ca(45,async function(){return new gxc({s8:__c.Ebc})});__c.SI.prototype.y_=__c.ca(44,async function(){throw Error("Not implemented");});__c.SI.prototype.kka=__c.ca(43,async function(){return new fxc({s8:__c.Ebc})});var Twc=H(()=>({closedCaptions:__c.Oa(1,__c.uY)})),o3=__webpack_require__(245307).Fm;var n3=__webpack_require__(75402)._;var p3=__webpack_require__(186901),hxc=p3.EW,ixc=p3.h5,Zwc=p3.mJ,q3=p3.sH,r3=p3.XI;var jxc=__webpack_require__(477176).B7;var kxc=H(()=>({Yu:__c.V(1),vfa:X(2),rQa:__c.yJ(3)}));var axc=H(()=>({type:__c.E("A?",1,"SOURCEIDS"),Khb:__c.BJ(1),ESb:__c.BJ(2),YGa:X(3),rAb:__c.DJ(4)}));var lxc=H(()=>({abb:X(1),Rhc:X(2),type:__c.E("A?",3,"AUTO"),Yu:__c.V(31),qQ:__c.DJ(32),jJ:X(33),vfa:X(34)}));var mxc=H(()=>({id:__c.V(1),vfa:X(2)}));var nxc;
nxc=class{static G(a){__c.K(a,{f_:q3.shallow,$A:q3.shallow,u$:q3.shallow,RLa:q3.shallow,hta:r3,Lbb:hxc,oOa:r3,BOa:r3,d5:r3.bound,zEa:r3,nna:r3.bound})}Pma(a){return this.f_.get(a)}hta(a,b){this.f_.set(a,b);this.u$.delete(a)}FHa(a){return this.$A.has(a)&&!this.f_.has(a)}get Lbb(){return this.$A.size>0}get CHa(){return this.E1.uX}oOa(a){this.E1.uX=a}BOa(a,b){this.$A.set(a,b)}foa(a){return this.u$.has(a)}d5(a){this.u$.add(a);this.$A.delete(a)}async POa({media:a,RPb:b,onError:c}){const d=n3()();try{if(!this.o_.y_)return!1;
if(this.f_.get(a.id)?.hoa||this.foa(a.id))return!0;this.Ffa.get(a)&&(this.K?.NB("Requesting new connection for media with existing connection"),this.Oga(a));const e=this.UUa+(window.navigator.connection?.rtt??0)*1E3*2,f=performance.now(),g=d.r(await d.s(this.y_(a.id,a.Id,a.vs+e)));let h=!1;this.Ffa.set(a,g.subscribe(k=>{ixc(()=>{if(!h&&k.resultType!==3){const l=(performance.now()-f)*1E3;l>3E6&&b&&(this.UUa=l)}h=!0;k.qM.length&&this.A3(a.id,k)})},k=>{c?.();this.Ffa.delete(a);this.d5(a.id);this.K?.error(k)}));
return!0}finally{d.s()}}Oga(a){this.Ffa.get(a)?.unsubscribe();this.Ffa.delete(a)}A3(a,b){var c=this.f_.get(a);if(!c?.hoa)if(b.resultType===3)b={$O:b.$O,mja:[...b.qM],hoa:!0},this.hta(a,b),this.$A.delete(a),this.u$.delete(a);else{var d=this.eYa.get(a);c=[d?.reduce((e,f)=>Wwc(e,f.qM),[])??[],b.qM,c?.mja??[]].reduce((e,f)=>Wwc(e,f),[]);this.hta(a,{$O:b.$O,mja:c,hoa:!1});b.isPartial||this.eYa.set(a,d?[...d,b]:[b])}}async y_(a,b,c){const d=n3()();try{if(!this.o_.y_)throw Error();const e=new jxc;return d.r(await d.s(this.o_.y_(new kxc({Yu:a,
vfa:b,rQa:c}),e)))}finally{d.s()}}async jma(a){const b=n3()();try{const d=f=>this.$A.has(f)||this.Pma(f),e=__c.Be(a,f=>f.id).filter(f=>!d(f.id));if(!(e.length<1)){var c=b.r(await b.s(cxc(this,e)));b.r(await b.s(Promise.all(e.map(f=>this.zEa(f.id,c.get(f.id))))))}}finally{b.s()}}async zEa(a,b){const c=n3()();try{if(b&&b.length!==0)for(const d of b)if(d.url){const e=c.r(await c.s(dxc(this,d)));this.hta(a,e.Qsb);break}}finally{c.s()}}async kka(a){const b=n3()();try{const c=new lxc({Yu:a.id,vfa:a.Id,
jJ:void 0,qQ:!0});return b.r(await b.s(this.o_.kka(c)))}finally{b.s()}}async Dna(a,b){const c=n3()();try{const d=new mxc({id:a,vfa:b});return c.r(await c.s(this.o_.Dna(d)))}finally{c.s()}}nna(a,b){const c=a.Yu,d=a.S0;if(c)switch(a.status){case "UPLOADING":case "PROCESSING":this.BOa(c,b);break;case "FAILED":if(d==="NO_AUDIO_STREAM"){this.$A.delete(c);break}this.d5(c);break;case "IMPORTED":this.$A.delete(c)}}constructor(a,b,c,d,e=f=>window.fetch(f).then(o3.wrap(g=>g.json()))){this.o_=a;this.E1=b;this.jJ=
c;this.K=d;this.fetch=e;this.f_=(nxc.G(this),new Map);this.eYa=new Map;this.UUa=3E6;this.$A=new Map;this.u$=new Set;this.RLa=new Map;this.Ffa=new Map;$wc(this)}};__c.L$b={};__c.L$b.jnb=nxc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/7a1e09b093a7a391.js.map